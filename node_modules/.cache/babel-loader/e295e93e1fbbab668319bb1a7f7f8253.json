{"ast":null,"code":"import _toConsumableArray from\"/Users/k4/test-apps/megane-system-test02/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/k4/test-apps/megane-system-test02/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Chart from\"./Chart\";import SortButton from\"../functions/SortButton\";import FilterForm from\"../functions/FilterForm\";export default function ChartList(_ref){var charts=_ref.charts,refreshCharts=_ref.refreshCharts;var _useState=useState(charts),_useState2=_slicedToArray(_useState,2),arrangeList=_useState2[0],setArrangeList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isArrangedAscend=_useState4[0],setArrangedAscend=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isArrangedDescend=_useState6[0],setArrangedDescend=_useState6[1];useEffect(function(){var unmount=false;if(!unmount){var arranged=_toConsumableArray(charts).sort(function(a,b){if(a.sort_id>b.sort_id){return-1;}else{return 1;}});setArrangeList(arranged);setArrangedDescend(true);}return function(){unmount=true;};},[charts]);var handleSortAscend=function handleSortAscend(){var list=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_toConsumableArray(arrangeList);var arranged=list.sort(function(a,b){if(a.sort_id<b.sort_id){return-1;}else{return 1;}});setArrangeList(arranged);setArrangedDescend(false);setArrangedAscend(true);};var handleSortDsecend=function handleSortDsecend(){var list=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_toConsumableArray(arrangeList);var arranged=list.sort(function(a,b){if(a.sort_id>b.sort_id){return-1;}else{return 1;}});setArrangeList(arranged);setArrangedDescend(true);setArrangedAscend(false);};var handleFilterList=function handleFilterList(e){var filterd=_toConsumableArray(charts);filterd=filterd.filter(function(item){if(item.name.toLowerCase().search(e.target.value.toLowerCase())!==-1){return true;}if(item.id.toLowerCase().search(e.target.value.toLowerCase())!==-1){return true;}});if(isArrangedAscend){handleSortAscend(filterd);}if(isArrangedDescend){handleSortDsecend(filterd);}setArrangeList(filterd);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"mt-5 mb-3\"},\"\\u30AB\\u30EB\\u30C6\\u4E00\\u89A7\"),/*#__PURE__*/React.createElement(SortButton,{handleSortDescend:handleSortDsecend,handleSortAscend:handleSortAscend}),/*#__PURE__*/React.createElement(FilterForm,{handleFilterList:handleFilterList,searchTitle:\"名前or顧客ID検索：\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"list-group\"},arrangeList.map(function(chart){return/*#__PURE__*/React.createElement(Chart,{chart:chart,key:chart.id,refreshCharts:refreshCharts});})));}","map":{"version":3,"sources":["/Users/k4/test-apps/megane-system-test02/src/components/tableData/chart/ChartList.js"],"names":["React","useState","useEffect","Chart","SortButton","FilterForm","ChartList","charts","refreshCharts","arrangeList","setArrangeList","isArrangedAscend","setArrangedAscend","isArrangedDescend","setArrangedDescend","unmount","arranged","sort","a","b","sort_id","handleSortAscend","list","handleSortDsecend","handleFilterList","e","filterd","filter","item","name","toLowerCase","search","target","value","id","map","chart"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Chart from \"./Chart\";\nimport SortButton from \"../functions/SortButton\";\nimport FilterForm from \"../functions/FilterForm\";\n\nexport default function ChartList({ charts, refreshCharts }) {\n  const [arrangeList, setArrangeList] = useState(charts);\n  const [isArrangedAscend, setArrangedAscend] = useState(false);\n  const [isArrangedDescend, setArrangedDescend] = useState(false);\n\n  useEffect(() => {\n    let unmount = false;\n    if (!unmount) {\n      const arranged = [...charts].sort((a, b) => {\n        if (a.sort_id > b.sort_id) {\n          return -1;\n        } else {\n          return 1;\n        }\n      });\n      setArrangeList(arranged);\n      setArrangedDescend(true);\n    }\n    return () => {\n      unmount = true;\n    };\n  }, [charts]);\n\n  const handleSortAscend = (list = [...arrangeList]) => {\n    const arranged = list.sort((a, b) => {\n      if (a.sort_id < b.sort_id) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n    setArrangeList(arranged);\n    setArrangedDescend(false);\n    setArrangedAscend(true);\n  };\n\n  const handleSortDsecend = (list = [...arrangeList]) => {\n    const arranged = list.sort((a, b) => {\n      if (a.sort_id > b.sort_id) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n    setArrangeList(arranged);\n    setArrangedDescend(true);\n    setArrangedAscend(false);\n  };\n\n  const handleFilterList = (e) => {\n    let filterd = [...charts];\n    filterd = filterd.filter((item) => {\n      if (item.name.toLowerCase().search(e.target.value.toLowerCase()) !== -1) {\n        return true;\n      }\n      if (item.id.toLowerCase().search(e.target.value.toLowerCase()) !== -1) {\n        return true;\n      }\n    });\n    if (isArrangedAscend) {\n      handleSortAscend(filterd);\n    }\n    if (isArrangedDescend) {\n      handleSortDsecend(filterd);\n    }\n    setArrangeList(filterd);\n  };\n\n  return (\n    <div>\n      <h2 className=\"mt-5 mb-3\">カルテ一覧</h2>\n      <SortButton\n        handleSortDescend={handleSortDsecend}\n        handleSortAscend={handleSortAscend}\n      />\n      <FilterForm\n        handleFilterList={handleFilterList}\n        searchTitle={\"名前or顧客ID検索：\"}\n      />\n      <div className=\"list-group\">\n        {arrangeList.map((chart) => (\n          <Chart chart={chart} key={chart.id} refreshCharts={refreshCharts} />\n        ))}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}