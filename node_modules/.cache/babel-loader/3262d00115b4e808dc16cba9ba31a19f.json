{"ast":null,"code":"import _toConsumableArray from\"/Users/k4/test-apps/megane-system-test02/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/k4/test-apps/megane-system-test02/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Frame from\"./Frame\";import SortButton from\"../functions/SortButton\";import FilterForm from\"../functions/FilterForm\";export default function FrameList(_ref){var frames=_ref.frames,refreshFrames=_ref.refreshFrames;var _useState=useState(frames),_useState2=_slicedToArray(_useState,2),arrangeList=_useState2[0],setArrangeList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isArrangedAscend=_useState4[0],setArrangedAscend=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isArrangedDescend=_useState6[0],setArrangedDescend=_useState6[1];useEffect(function(){var unmount=false;if(!unmount){var arranged=_toConsumableArray(frames).sort(function(a,b){if(a.sort_id>b.sort_id){return-1;}else{return 1;}});setArrangeList(arranged);setArrangedDescend(true);// setArrangeList([...arranged]);\n}return function(){unmount=true;};},[frames]);var handleSortAscend=function handleSortAscend(){var list=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_toConsumableArray(arrangeList);// const arranged = [...frames].sort((a, b) => {\nvar arranged=list.sort(function(a,b){if(a.sort_id<b.sort_id){return-1;}else{return 1;}});setArrangeList(arranged);setArrangedDescend(false);setArrangedAscend(true);};var handleSortDsecend=function handleSortDsecend(){var list=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_toConsumableArray(arrangeList);// const arranged = [...frames].sort((a, b) => {\nvar arranged=list.sort(function(a,b){if(a.sort_id>b.sort_id){return-1;}else{return 1;}});setArrangeList(arranged);setArrangedDescend(true);setArrangedAscend(false);};var handleFilterList=function handleFilterList(e){// const filterd = [...frames].filter((item) => {\nvar filterd=_toConsumableArray(frames);filterd=filterd.filter(function(item){if(item.frameName.toLowerCase().search(e.target.value.toLowerCase())!==-1){return true;}if(item.productNumber.toLowerCase().search(e.target.value.toLowerCase())!==-1){return true;}});if(isArrangedAscend){handleSortAscend(filterd);}if(isArrangedDescend){handleSortDsecend(filterd);}setArrangeList(filterd);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"mt-5 mb-3\"},\"\\u30D5\\u30EC\\u30FC\\u30E0\\u60C5\\u5831\\u4E00\\u89A7\"),/*#__PURE__*/React.createElement(SortButton,{handleSortDescend:handleSortDsecend,handleSortAscend:handleSortAscend}),/*#__PURE__*/React.createElement(FilterForm,{handleFilterList:handleFilterList,searchTitle:\"商品名or品番検索：\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"list-group\"},arrangeList.map(function(frame){return/*#__PURE__*/React.createElement(Frame,{frame:frame,key:frame.id,refreshFrames:refreshFrames});})));}","map":{"version":3,"sources":["/Users/k4/test-apps/megane-system-test02/src/components/tableData/frame/FrameList.js"],"names":["React","useState","useEffect","Frame","SortButton","FilterForm","FrameList","frames","refreshFrames","arrangeList","setArrangeList","isArrangedAscend","setArrangedAscend","isArrangedDescend","setArrangedDescend","unmount","arranged","sort","a","b","sort_id","handleSortAscend","list","handleSortDsecend","handleFilterList","e","filterd","filter","item","frameName","toLowerCase","search","target","value","productNumber","map","frame","id"],"mappings":"sUAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CAEA,cAAe,SAASC,CAAAA,SAAT,MAA8C,IAAzBC,CAAAA,MAAyB,MAAzBA,MAAyB,CAAjBC,aAAiB,MAAjBA,aAAiB,eACrBP,QAAQ,CAACM,MAAD,CADa,wCACpDE,WADoD,eACvCC,cADuC,8BAEbT,QAAQ,CAAC,KAAD,CAFK,yCAEpDU,gBAFoD,eAElCC,iBAFkC,8BAGXX,QAAQ,CAAC,KAAD,CAHG,yCAGpDY,iBAHoD,eAGjCC,kBAHiC,eAK3DZ,SAAS,CAAC,UAAM,CACd,GAAIa,CAAAA,OAAO,CAAG,KAAd,CACA,GAAI,CAACA,OAAL,CAAc,CACZ,GAAMC,CAAAA,QAAQ,CAAG,mBAAIT,MAAJ,EAAYU,IAAZ,CAAiB,SAACC,CAAD,CAAIC,CAAJ,CAAU,CAC1C,GAAID,CAAC,CAACE,OAAF,CAAYD,CAAC,CAACC,OAAlB,CAA2B,CACzB,MAAO,CAAC,CAAR,CACD,CAFD,IAEO,CACL,MAAO,EAAP,CACD,CACF,CANgB,CAAjB,CAOAV,cAAc,CAACM,QAAD,CAAd,CACAF,kBAAkB,CAAC,IAAD,CAAlB,CACA;AACD,CACD,MAAO,WAAM,CACXC,OAAO,CAAG,IAAV,CACD,CAFD,CAGD,CAjBQ,CAiBN,CAACR,MAAD,CAjBM,CAAT,CAmBA,GAAMc,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAA6B,IAA5BC,CAAAA,IAA4B,8EAAjBb,WAAiB,EACpD;AACA,GAAMO,CAAAA,QAAQ,CAAGM,IAAI,CAACL,IAAL,CAAU,SAACC,CAAD,CAAIC,CAAJ,CAAU,CACnC,GAAID,CAAC,CAACE,OAAF,CAAYD,CAAC,CAACC,OAAlB,CAA2B,CACzB,MAAO,CAAC,CAAR,CACD,CAFD,IAEO,CACL,MAAO,EAAP,CACD,CACF,CANgB,CAAjB,CAOAV,cAAc,CAACM,QAAD,CAAd,CACAF,kBAAkB,CAAC,KAAD,CAAlB,CACAF,iBAAiB,CAAC,IAAD,CAAjB,CACD,CAZD,CAcA,GAAMW,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAA6B,IAA5BD,CAAAA,IAA4B,8EAAjBb,WAAiB,EACrD;AACA,GAAMO,CAAAA,QAAQ,CAAGM,IAAI,CAACL,IAAL,CAAU,SAACC,CAAD,CAAIC,CAAJ,CAAU,CACnC,GAAID,CAAC,CAACE,OAAF,CAAYD,CAAC,CAACC,OAAlB,CAA2B,CACzB,MAAO,CAAC,CAAR,CACD,CAFD,IAEO,CACL,MAAO,EAAP,CACD,CACF,CANgB,CAAjB,CAOAV,cAAc,CAACM,QAAD,CAAd,CACAF,kBAAkB,CAAC,IAAD,CAAlB,CACAF,iBAAiB,CAAC,KAAD,CAAjB,CACD,CAZD,CAcA,GAAMY,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,CAAD,CAAO,CAC9B;AACA,GAAIC,CAAAA,OAAO,oBAAOnB,MAAP,CAAX,CAEAmB,OAAO,CAAGA,OAAO,CAACC,MAAR,CAAe,SAACC,IAAD,CAAU,CACjC,GACEA,IAAI,CAACC,SAAL,CAAeC,WAAf,GAA6BC,MAA7B,CAAoCN,CAAC,CAACO,MAAF,CAASC,KAAT,CAAeH,WAAf,EAApC,IAAsE,CAAC,CADzE,CAEE,CACA,MAAO,KAAP,CACD,CACD,GACEF,IAAI,CAACM,aAAL,CACGJ,WADH,GAEGC,MAFH,CAEUN,CAAC,CAACO,MAAF,CAASC,KAAT,CAAeH,WAAf,EAFV,IAE4C,CAAC,CAH/C,CAIE,CACA,MAAO,KAAP,CACD,CACF,CAbS,CAAV,CAcA,GAAInB,gBAAJ,CAAsB,CACpBU,gBAAgB,CAACK,OAAD,CAAhB,CACD,CACD,GAAIb,iBAAJ,CAAuB,CACrBU,iBAAiB,CAACG,OAAD,CAAjB,CACD,CACDhB,cAAc,CAACgB,OAAD,CAAd,CACD,CAzBD,CA2BA,mBACE,4CACE,0BAAI,SAAS,CAAC,WAAd,qDADF,cAEE,oBAAC,UAAD,EACE,iBAAiB,CAAEH,iBADrB,CAEE,gBAAgB,CAAEF,gBAFpB,EAFF,cAME,oBAAC,UAAD,EACE,gBAAgB,CAAEG,gBADpB,CAEE,WAAW,CAAE,YAFf,EANF,cAUE,2BAAK,SAAS,CAAC,YAAf,EACGf,WAAW,CAAC0B,GAAZ,CAAgB,SAACC,KAAD,qBACf,oBAAC,KAAD,EAAO,KAAK,CAAEA,KAAd,CAAqB,GAAG,CAAEA,KAAK,CAACC,EAAhC,CAAoC,aAAa,CAAE7B,aAAnD,EADe,EAAhB,CADH,CAVF,CADF,CAkBD","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Frame from \"./Frame\";\nimport SortButton from \"../functions/SortButton\";\nimport FilterForm from \"../functions/FilterForm\";\n\nexport default function FrameList({ frames, refreshFrames }) {\n  const [arrangeList, setArrangeList] = useState(frames);\n  const [isArrangedAscend, setArrangedAscend] = useState(false);\n  const [isArrangedDescend, setArrangedDescend] = useState(false);\n\n  useEffect(() => {\n    let unmount = false;\n    if (!unmount) {\n      const arranged = [...frames].sort((a, b) => {\n        if (a.sort_id > b.sort_id) {\n          return -1;\n        } else {\n          return 1;\n        }\n      });\n      setArrangeList(arranged);\n      setArrangedDescend(true);\n      // setArrangeList([...arranged]);\n    }\n    return () => {\n      unmount = true;\n    };\n  }, [frames]);\n\n  const handleSortAscend = (list = [...arrangeList]) => {\n    // const arranged = [...frames].sort((a, b) => {\n    const arranged = list.sort((a, b) => {\n      if (a.sort_id < b.sort_id) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n    setArrangeList(arranged);\n    setArrangedDescend(false);\n    setArrangedAscend(true);\n  };\n\n  const handleSortDsecend = (list = [...arrangeList]) => {\n    // const arranged = [...frames].sort((a, b) => {\n    const arranged = list.sort((a, b) => {\n      if (a.sort_id > b.sort_id) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n    setArrangeList(arranged);\n    setArrangedDescend(true);\n    setArrangedAscend(false);\n  };\n\n  const handleFilterList = (e) => {\n    // const filterd = [...frames].filter((item) => {\n    let filterd = [...frames];\n\n    filterd = filterd.filter((item) => {\n      if (\n        item.frameName.toLowerCase().search(e.target.value.toLowerCase()) !== -1\n      ) {\n        return true;\n      }\n      if (\n        item.productNumber\n          .toLowerCase()\n          .search(e.target.value.toLowerCase()) !== -1\n      ) {\n        return true;\n      }\n    });\n    if (isArrangedAscend) {\n      handleSortAscend(filterd);\n    }\n    if (isArrangedDescend) {\n      handleSortDsecend(filterd);\n    }\n    setArrangeList(filterd);\n  };\n\n  return (\n    <div>\n      <h2 className=\"mt-5 mb-3\">フレーム情報一覧</h2>\n      <SortButton\n        handleSortDescend={handleSortDsecend}\n        handleSortAscend={handleSortAscend}\n      />\n      <FilterForm\n        handleFilterList={handleFilterList}\n        searchTitle={\"商品名or品番検索：\"}\n      />\n      <div className=\"list-group\">\n        {arrangeList.map((frame) => (\n          <Frame frame={frame} key={frame.id} refreshFrames={refreshFrames} />\n        ))}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}